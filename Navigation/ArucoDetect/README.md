# ArucoDetect
The main C++ source code for detecting ArUco markers is located in `ArucoDetect.cpp`.

# Files
1. `ArucoDetect.cpp` has the main C++ source code. Frames from two cameras are processed to detect the **pose** (position and orientation) of the ArUCO markers on the spacecraft relative to an inertial marker placed in the arena. **3D reconstruction** method is used to obtain the 3D coordinates of the marker. The rotation vectors generated by ArUCO module are used to calculate the **yaw angle** of spacecraft relative to the inertial marker. Finally, the complementary filter is applied to fuse data from both cameras and the position data is saved to `coordinates.txt` and yaw angle is saved to `angle.txt`.
    #### Inputs:
      1. **`cameraMatrix1`**: Intrinsic matrix of camera 1.
      2. **`cameraMatrix2`**: Intrinsic matrix of camera 2.
      3. **`distCoeffs1`**: Distortion coefficients of camera 1.
      4. **`distCoeffs2`**: Distortion coefficients of camera 2.
      5. **`markerLength`**: Length of ArUCo marker in same units as the size of square in checkerboard mentioned during camera calibration.

    #### Outputs:
      1. **`finalCoordinates`**: The final (x,y) coordinates of both spacecraft relative to inertial marker.
      2. **`finalZAngle`**: The final yaw angle of both spacecraft relative to inertial marker.

2. `Instructions to run opencv in vscode.txt` contains instructions for configuring OpenCV to run in VSCode.
3. `angle.txt` is created during runtime by `ArucoDetect.cpp` to store the yaw angle of spacecraft relative to the inertial marker. If both spacecraft are in arena, the odd-numbered lines of the file correspond to the data of spacecraft with ID 1, while even-numbered lines correspond to the data of spacecraft with ID 7. 
4. `coordinates.txt` is created during runtime by `ArucoDetect.cpp` to store the position of spacecraft relative to the inertial marker. If both spacecraft are in arena, the odd-numbered lines of the file correspond to the (x,y) coordinates of spacecraft with ID 1, while even-numbered lines correspond to the data of spacecraft with ID 7.
5. `createMarkers.cpp` contains the C++ source code to generate ArUCO marker of a specified size and ID from the **DICT_6X6_50** dictionary and save the image in the directory.
6. `plot_Coordinates.m` reads `angle.txt` and `coordinates.txt` files and plots the position and angle data for each spacecraft in **MATLAB**.
